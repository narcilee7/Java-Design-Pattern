# Java 设计模式

## 创建者模式

### 单例模式

分为：
1. 懒汉式
2. 饿汉式

饿汉式：线程安全，但是生命周期与类加载时一致。
懒汉式：线程不安全，类加载时不创建对象，创建对象时才进行同步，所以需要加锁。

总结：实际上我们大多时候使用饿汉式，因为这个单例迟早要被实例化、占用内存，延迟懒加载的意义不大，加锁解锁反而是一种资源浪费，同步更是会降低CPU的利用率。

**越简单的包容性越强，越复杂的反而越容易出错**

### 原型模式

原型模式的目的是从原型实例克隆出新的实例，对于那些有非常复杂的初始化过程的对象或者是需要耗费大量资源的情况，原型模式是更好的选择。

实现方式即：implements Cloneable接口，重写clone方法。这种原型模式的拷贝属于**浅拷贝**

### 工厂模式

### 抽象工厂

抽象工厂是对工厂的抽象化，而不只是制造方法。

为了满足不同用户对于产品的多样化需求，工厂不会仅局限于一类产品，但是系统如果按工厂方法那样为每种产品都增加一个新工厂又会造成工厂泛滥。
所以，为了调和这种矛盾，抽象工厂模式提供了另一种思路，将各种产品分门别类，基于此来规划各种工厂的制造接口，最终确立产品制造的顶级规范，使其与具体产品彻底脱钩。
**抽象工厂是建立在制造复杂产品体系需求基础之上的一种设计模式，在某种意义上，我们可以将抽象工厂模式理解为工厂方法模式的高度集群化升级版。**

与工厂方法模式不同，抽象工厂模式能够应对更加复杂的产品族系，它更类似于一种对“工业制造标准”的制定与推行，各工厂实现都遵循此标准来进行生产活动，**以工厂类划分产品族，以制造方法划分产品系列**，达到无限扩展产品的目的。

### 建造者

建造者模式(Builder)所构建的对象一定是庞大而复杂的，并且一定是按照既定的制造工序将组件组装起来的，例如计算机、汽车、建筑物等。我们通常将负责构建这些大型对象的工程师称为建造者。
建造者模式又称为生成器模式，**主要用于对复杂对象的构建、初始化，它可以将多个简单的组件对象按顺序一步步组装起来，最终构建成一个复杂的成品对象**。
与工厂系列模式不同的是，**建造者模式的主要目的在于把烦琐的构建过程从不同对象中抽离出来，使其脱离并独立于产品类与工厂类，最终实现用同一套标准的制造工序能够产出不同的产品**。

## 结构型模式

### 外观模式

Facade可能是最简单的结构型设计模式，它能够使得多个不同的子系统接口封装起来，并对外提供统一的高层接口，使得复杂的子系统变得更加易用。

### 组合模式

组合模式(Composite)是针对由多个节点对象（部分）组成的树形结构的对象（整体）而发展出的一种结构型设计模式，它能够使客户端在操作整体对象或者其下的每个节点对象时做出统一的响应，保证树形结构对象使用方法的一致性，使客户端不必关注对象的整体或部分，最终达到对象复杂的层次结构与客户端解耦的目的。

### 装饰器模式

装饰指在某物件上装点额外饰品的行为，以使其原本朴素的外表变得更加饱满、华丽，而装饰器（装饰者）就是能够化“腐朽”为神奇的利器。
装饰器模式(Decorator)能够在运行时动态地为原始对象增加一些额外的功能，使其变得更加强大。
从某种程度上讲，装饰器非常类似于“继承”，它们都是为了增强原始对象的功能，
**区别在于方式的不同，后者是在编译时(compile-time)静态地通过对原始类的继承完成，而前者则是在程序运行时(run-time)通过对原始对象动态地“包装”完成，是对类实例（对象）“装饰”的结果。**

装饰器模式最终的目的就在于“装饰”对象，其中装饰器抽象类扮演着至关重要的角色，它实现了组件的通用接口，并且使自身抽象化以迫使子类继承，使装饰器固定特性的延续与多态化成为可能。

### 适配器

Adapter也成为转换器，它一定是进行适应与匹配工作的物件。当一个对象或类的接口不能匹配用户所期待的接口时，适配器就充当中间转换的角色，以达到兼容用户接口的目的，同时适配器实现了客户端与接口的解耦，提高了组件的可复用性。

### 享元模式

享元模式：字面意义上，它就是一种对象共享技术，它允许我们通过共享对象来减少内存的使用，从而达到节省内存的目的。

### 代理模式

代理模式：代理模式就是为某对象创建一个代理对象，从而实现对目标对象的控制，代理对象可以控制目标对象的访问，并可以对其做任何 desired thing。

#### 动态代理

实例化过程是动态完成的，也就是说我们不需要专门针对某个接口去编写代码实现一个代理类，而是在接口运行时动态生成。

### 桥接模式

桥接模式(Bridge)能将抽象与实现分离，使二者可以各自单独变化而不受对方约束，使用时再将它们组合起来，就像架设桥梁一样连接它们的功能，如此降低了抽象与实现这两个可变维度的耦合度，以保证系统的可扩展性。

桥接模式构架了一种分化的结构模型，巧妙地将抽象与实现解耦，分离出了多个维度并允许其各自延伸和扩展，最终使系统更加松散、灵活
